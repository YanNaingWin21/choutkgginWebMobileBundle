window.__require=function t(e,o,n){function a(c,r){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return a(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)a(n[c]);return a}({animationController:[function(t,e,o){"use strict";cc._RF.push(e,"c15c2VFSoFML4gU+gzy6OdS","animationController"),cc.Class({extends:cc.Component,properties:{diceBowl:{default:null,type:cc.Node},diceCover:{default:null,type:cc.Node},mask:{default:null,type:cc.Node},audioControllerNode:{default:null,type:cc.Node}},onLoad:function(){},setDefaultLocation:function(){this.diceBowl.x=350,this.diceBowl.y=-20,this.diceBowl.scaleX=.7,this.diceBowl.scaleY=.7,this.diceBowl.active=!0,this.diceCover.angle=2,this.diceCover.x=4,this.diceCover.y=-75},_createStartAnimation:function(){this.diceCover.position=cc.v2(4,-75),this.diceCover.rotation=0;var t=cc.moveTo(.5,cc.v2(0,0)),e=cc.scaleTo(.5,1);this.diceBowl.runAction(cc.spawn(t,e)),this.scheduleOnce(this._createDiceBowlAnimation,1),this.scheduleOnce(this.moveBackSmallBowl,3.5)},moveBackSmallBowl:function(){var t=cc.moveTo(.5,cc.v2(350,-20)),e=cc.scaleTo(.5,.7);this.diceBowl.runAction(cc.spawn(t,e))},_createDiceBowlAnimation:function(){this.audioControllerNode.getComponent("audioController")._playRollingDiceAudio(),this.shakeAnimation=this.diceBowl.getComponent(cc.Animation),this.shakeAnimation.play("dicebowlShakeAnim"),this.scheduleOnce(this.removeMaskAndStopAnim,2)},removeMaskAndStopAnim:function(){this.mask.active=!1,this.diceCover.position=cc.v2(4,-75),this.shakeAnimation.stop("dicebowlShakeAnim")},moveDiceMiddle:function(){var t=cc.moveTo(1,cc.v2(0,0)),e=cc.scaleTo(1,1);this.diceBowl.runAction(cc.spawn(t,e)),this.scheduleOnce(this._createShowDiceAnimation,1)},_createShowDiceAnimation:function(){var t=cc.moveTo(.5,cc.v2(this.diceCover.x,1e3));this.diceCover.runAction(t),this.audioControllerNode.getComponent("audioController")._playShowDiceAudio(),this.scheduleOnce(this.moveBackSmallBowl,2)},_moveBackDiceCover:function(){var t=this,e=cc.moveTo(.5,cc.v2(4,-75));t.diceCover.runAction(e),t.scheduleOnce(function(){t.audioControllerNode.getComponent("audioController")._playDropBowlCoverAudio()},.5)}}),cc._RF.pop()},{}],audioController:[function(t,e,o){"use strict";cc._RF.push(e,"ef1e288bHZGHomf2mverFxS","audioController"),cc.Class({extends:cc.Component,properties:{buttonClick:{default:null,type:cc.AudioClip},coinCollect:{default:null,type:cc.AudioClip},cardClick:{default:null,type:cc.AudioClip},win:{default:null,type:cc.AudioClip},lose:{default:null,type:cc.AudioClip},betToken:{default:null,type:cc.AudioClip},rollingDice:{default:null,type:cc.AudioClip},dropBowlCover:{default:null,type:cc.AudioClip},showDiceVoice:{default:null,type:cc.AudioClip}},onLoad:function(){},_playbetTokenOnCardAudio:function(){this.betTokenOnCardAudio=cc.audioEngine.play(this.cardClick,!1,1)},_playButtonAudio:function(){this.buttonClickAudio=cc.audioEngine.play(this.buttonClick,!1,1)},_playRollingDiceAudio:function(){this.rollingDiceAudio=cc.audioEngine.play(this.rollingDice,!1,3),cc.audioEngine.setVolume(this.rollingDiceAudio,.5)},_playCoinCollectAudio:function(){this.coinCollectMusic=cc.audioEngine.play(this.coinCollect,!1,2)},_playWinAudio:function(){this.winAudio=cc.audioEngine.play(this.win,!1,1),cc.audioEngine.setVolume(this.winAudio,.5)},_playLoseAudio:function(){this.loseAudio=cc.audioEngine.play(this.lose,!1,1)},_playbetTokenAudio:function(){this.betTokenAudio=cc.audioEngine.play(this.betToken,!1,1)},_playDropBowlCoverAudio:function(){this.dropBowlAudio=cc.audioEngine.play(this.dropBowlCover,!1,1)},_playShowDiceAudio:function(){this.showDiceAudio=cc.audioEngine.play(this.showDiceVoice,!1,1)}}),cc._RF.pop()},{}],cardController:[function(t,e,o){"use strict";cc._RF.push(e,"4f7c4JhyFhMXIdHZbRR1u9Z","cardController"),cc.Class({extends:cc.Component,properties:{tokenAmountBar:{default:null,type:cc.Node},tokenAmountLabel:{default:null,type:cc.Label},cardCharacterSprite:{default:null,type:cc.Sprite},cardBgImages:{default:[],type:cc.SpriteFrame},matchCardNode:{default:null,type:cc.Node}},linkWithMainLayer:function(t){this.mainController=t},createCard:function(t,e,o){this.matchCardNode.active=!1,this.tokenAmountInt=0,this.tokenAmountBar.active=!1,this.cardId=t,this.cardName=o.name,this.cardCharacterSprite.spriteFrame=e},onLoad:function(){},start:function(){},onBetClick:function(){this.mainController.onCardClick(this.node.position,this.cardId)},addTokenAmount:function(t){this.mainController.audioController._playbetTokenOnCardAudio(),this.tokenAmountBar.active=!0,this.tokenAmountInt+=t,this.tokenAmountLabel.string=this.tokenAmountInt,this.mainController.addAmountToState(!1,this.cardId,this.tokenAmountInt)},removeTokenAmount:function(t){t&&this.mainController.audioController._playbetTokenOnCardAudio(),this.tokenAmountBar.active=!1,this.mainController.removeBetToken(this.tokenAmountInt),this.tokenAmountLabel.string=this.tokenAmountInt,this.tokenAmountInt=0},removeLoseCard:function(){this.node.getComponent(cc.Sprite).spriteFrame=this.cardBgImages[0]}}),cc._RF.pop()},{}],comboController:[function(t,e,o){"use strict";cc._RF.push(e,"a1f53EOksxF8J6NsP3mUuQi","comboController"),cc.Class({extends:cc.Component,properties:{tokenAmountBar:{default:null,type:cc.Node},tokenAmountLabel:{default:null,type:cc.Label},comboBgImages:{default:[],type:cc.SpriteFrame},comboCharacterSprite:{default:null,type:cc.Sprite},matchComboNode:{default:null,type:cc.Node}},linkWithMainLayer:function(t){this.mainController=t},createComboCard:function(t,e,o){this.matchComboNode.active=!1,this.tokenAmountInt=0,this.tokenAmountBar.active=!1,this.cardId=t,this.comboName=o.name,this.comboCharacterSprite.spriteFrame=e},onLoad:function(){},start:function(){},onBetClick:function(){this.mainController.onComboCardClick(this.node.position,this.cardId)},addTokenAmount:function(t){this.mainController.audioController._playbetTokenOnCardAudio(),this.tokenAmountBar.active=!0,this.tokenAmountInt+=t,this.tokenAmountLabel.string=this.tokenAmountInt,this.mainController.addAmountToState(!0,this.cardId,this.tokenAmountInt)},removeTokenAmount:function(t){t&&this.mainController.audioController._playbetTokenOnCardAudio(),this.tokenAmountBar.active=!1,this.mainController.removeBetToken(this.tokenAmountInt),this.tokenAmountLabel.string=this.tokenAmountInt,this.tokenAmountInt=0},removeLoseCard:function(){this.node.getComponent(cc.Sprite).spriteFrame=this.comboBgImages[0]}}),cc._RF.pop()},{}],dal:[function(t,e,o){"use strict";cc._RF.push(e,"2c476NQPuVImo/unmbWlxgt","dal");var n=function(t){var e=location.href;t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==o?null:o[1]},a=n("userId"),i=n("token");function c(t,e){var o=cc.loader.getXMLHttpRequest();o.open("GET",t,!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onreadystatechange=function(){if(4==o.readyState&&null!=e)try{e(null,JSON.parse(o.responseText))}catch(t){e(t,null)}},o.send()}var r="http://services.shankoemee.com/v3/6kgame/";e.exports.getStatus=function(t){c(r+"getStatus?userId="+a+"&token="+i,t)},e.exports.bet=function(t,e){c(r+"bet?userId="+a+"&token="+i+"&betData="+t,e)},e.exports.claimReward=function(t){c(r+"claimReward?userId="+a+"&token="+i,t)},cc._RF.pop()},{}],historyItemController:[function(t,e,o){"use strict";cc._RF.push(e,"97d9fn47ElJkZc0WuwmgVZx","historyItemController"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},linkWithMainController:function(t){this.mainController=t},setUpHistoryItem:function(t){for(var e=0;e<3;e++)this.node.children[e].getComponent(cc.Sprite).spriteFrame=this.renderDice(t[e])},renderDice:function(t){var e;switch(t){case"L":e=this.mainController.cardCharacterImage[0];break;case"C":e=this.mainController.cardCharacterImage[1];break;case"T":e=this.mainController.cardCharacterImage[2];break;case"M":e=this.mainController.cardCharacterImage[3];break;case"E":e=this.mainController.cardCharacterImage[4];break;case"D":e=this.mainController.cardCharacterImage[5]}return e},start:function(){}}),cc._RF.pop()},{}],mainController:[function(t,e,o){"use strict";var n,a;cc._RF.push(e,"ea52b9I/Y9NH7/zzvD/Meqo","mainController");var i=0,c=t("./dal"),r={cardStates:[{name:"L",state:0,amount:0},{name:"C",state:0,amount:0},{name:"T",state:0,amount:0},{name:"M",state:0,amount:0},{name:"E",state:0,amount:0},{name:"D",state:0,amount:0}],comboStates:[{name:"LC",state:0,amount:0},{name:"LT",state:0,amount:0},{name:"LM",state:0,amount:0},{name:"LE",state:0,amount:0},{name:"LD",state:0,amount:0},{name:"CT",state:0,amount:0},{name:"CM",state:0,amount:0},{name:"CE",state:0,amount:0},{name:"CD",state:0,amount:0},{name:"TM",state:0,amount:0},{name:"TE",state:0,amount:0},{name:"TD",state:0,amount:0},{name:"ME",state:0,amount:0},{name:"MD",state:0,amount:0},{name:"ED",state:0,amount:0}]},s=[],l=[];cc.Class({extends:cc.Component,properties:{betTokenPrefab:{default:null,type:cc.Prefab},betTokenLayout:{default:null,type:cc.Node},cardLayout:{default:null,type:cc.Node},tokenLayout:{default:null,type:cc.Node},comboPrefab:{default:null,type:cc.Prefab},cardPrefab:{default:null,type:cc.Prefab},comboLayout:{default:null,type:cc.Node},creditLabel:{default:null,type:cc.Label},tokenLabel:{default:null,type:cc.Label},mask:{default:null,type:cc.Node},animation:{default:null,type:cc.Node},betButton:{default:null,type:cc.Node},cardCharacterImage:{default:[],type:cc.SpriteFrame},comboCharacterImage:{default:[],type:cc.SpriteFrame},tokenBtnActive:{default:null,type:cc.SpriteFrame},tokenBtnInActive:{default:null,type:cc.SpriteFrame},diceImages:{default:[],type:cc.SpriteFrame},firstDiceSprite:{default:null,type:cc.Sprite},secondDiceSprite:{default:null,type:cc.Sprite},thirdDiceSprite:{default:null,type:cc.Sprite},winFrameNode:{default:null,type:cc.Node},winAmount:{default:null,type:cc.Label},invisibleMask:{default:null,type:cc.Node},warningFrameNode:{default:null,type:cc.Node},coinItem:{default:null,type:cc.Prefab},shanPotCoinNode:{default:null,type:cc.Node},audioControllerNode:{default:null,type:cc.Node},winParticleNode:{default:null,type:cc.Node},lightNode:{default:null,type:cc.Node},notEnoughTokenFrameNode:{default:null,type:cc.Node},claimAndExitFrameNode:{default:null,type:cc.Node},claimAmountLabel:{default:null,type:cc.Label},claimMask:{default:null,type:cc.Node},guidePageViewNode:{default:null,type:cc.Node},toggleButton:{default:null,type:cc.Toggle},claimButton:{default:null,type:cc.Button},notAllowPlayMask:{default:null,type:cc.Node},level3AboveWarning:{default:null,type:cc.Node},autoBetToggle:{default:null,type:cc.Toggle},historyItemPrefab:{default:null,type:cc.Prefab},historyLayout:{default:null,type:cc.Node},historyScrollView:{default:null,type:cc.ScrollView}},onLoad:function(){this.winFrameNode.opacity=0,this.level3AboveWarning.active=!1,this.claimAndExitFrameNode.active=!1,this.cardStateCount=0,this.lightNode.active=!1,this.isFirstTime=!0,this.invisibleMask.active=!0,this.warningFrameNode.active=!1,this.notEnoughTokenFrameNode.active=!1,this.audioController=this.audioControllerNode.getComponent("audioController"),this.betAmount=0,this.cardId=1,this.tokenId=1,a=this.tokenLayout.children[0].position,i=1,this.cancelStatus=!1,this.mask.active=!1,this.betButton.active=!1,this.animationController=this.animation.getComponent("animationController"),this.animationController.setDefaultLocation(),this.cardLocation=cc.v2(0,0),this.tokenLocation=cc.v2(0,0),this.addComboCardNode(),this.addCardNode(),this.getUserStatus(),this.checkGuideStatusAndRoll(),this.checkAutoBetStatus(),null==cc.sys.localStorage.getItem("historyItemList")&&cc.sys.localStorage.setItem("historyItemList",JSON.stringify(s)),this.setUpHistoryItemList()},start:function(){},getUserStatus:function(){var t=this;c.getStatus(function(e,o){"404"==o.code?(t.notAllowPlayMask.active=!0,t.level3AboveWarning.active=!0):(t.winFrameNode.opacity=0,t.userToken=o.data.currentToken,t.creditAmount=o.data.userGameLog.reward,t.creditLabel.string=t.creditAmount,t.tokenLabel.string=t.userToken,t.checkClaimbuttonStatus(t.creditAmount))})},checkClaimbuttonStatus:function(t){this.claimButton.interactable=0!=t},checkGuideStatusAndRoll:function(){this.guideStatus=cc.sys.localStorage.getItem("shanDiceGuideStatus"),0!=this.guideStatus?(this.toggleButton.isChecked=!1,this.guidePageViewNode.active=!0,this.mask.active=!0):(this.toggleButton.isChecked=!0,this.guidePageViewNode.active=!1,this.mask.active=!1,this.scheduleOnce(this.onRollStart,1))},onClickInfoButton:function(){this.audioController._playButtonAudio(),this.guidePageViewNode.active=!0,this.mask.active=!0,this.guidePageViewNode.getComponent(cc.PageView).setCurrentPageIndex(0)},onCheckDontShowAgain:function(){1==this.toggleButton.isChecked?(this.guideStatus=0,cc.sys.localStorage.setItem("shanDiceGuideStatus",this.guideStatus)):(this.guideStatus=1,cc.sys.localStorage.setItem("shanDiceGuideStatus",this.guideStatus))},onClickBetButton:function(){var t=this;t.changeStateTobetData();var e=l.toString();if(t.audioController._playButtonAudio(),t.betButton.getComponent(cc.Button).interactable=!1,t.checkCardState(),0!=t.cardStateCount)c.bet(e,function(e,o){"200"==o.code?(t.userToken=o.data.currentToken,t.creditAmount=o.data.reward,t.invisibleMask.active=!0,t.animationController.moveDiceMiddle(),t.betButton.active=!1,t.mask.active=!0,t.rolledDice=o.data.diceData.rolledDiceData,t.rewardData=o.data.diceData.data,t.firstDiceSprite.spriteFrame=t.renderDice(t.rolledDice[0]),t.secondDiceSprite.spriteFrame=t.renderDice(t.rolledDice[1]),t.thirdDiceSprite.spriteFrame=t.renderDice(t.rolledDice[2]),t.winAmountValue=o.data.diceData.reward,t.winAmount.string=t.winAmountValue,t.betTokenLayout.removeAllChildren(),t.scheduleOnce(function(){t.lightNode.active=!0},1),t.scheduleOnce(function(){t.lightNode.active=!1,t.mask.active=!1},3),t.scheduleOnce(t.showRewardCard,3)):t.betButton.getComponent(cc.Button).interactable=!0});else{t.warningFrameNode.active=!0,t.betButton.getComponent(cc.Button).interactable=!1;var o=cc.fadeIn(.5),n=cc.fadeOut(1),a=cc.delayTime(1),i=cc.sequence(o,a,n);t.warningFrameNode.runAction(i),t.scheduleOnce(function(){t.warningFrameNode.active=!1,t.betButton.getComponent(cc.Button).interactable=!0},2)}},renderDice:function(t){var e;switch(t){case"L":e=this.diceImages[0];break;case"C":e=this.diceImages[1];break;case"T":e=this.diceImages[2];break;case"M":e=this.diceImages[3];break;case"E":e=this.diceImages[4];break;case"D":e=this.diceImages[5]}return e},showRewardCard:function(){var t=this;t.winFrameNode.active=!0,t.betButton.getComponent(cc.Button).interactable=!0;for(var e=function(e){var o=t.rewardData[e].betType;if(0!=t.rewardData[e].reward)if(1==o.length){var n=r.cardStates.findIndex(function(t){return t.name===o});t.activeMatchCardAndCombo(!0,n)}else{var a=r.comboStates.findIndex(function(t){return t.name===o});t.activeMatchCardAndCombo(!1,a)}else if(1==o.length){var i=r.cardStates.findIndex(function(t){return t.name===o});t.cardLayout.children[i].getComponent("cardController").removeLoseCard()}else{var c=r.comboStates.findIndex(function(t){return t.name===o});t.comboLayout.children[c].getComponent("comboController").removeLoseCard()}},o=0;o<t.rewardData.length;o++)e(o);t.scheduleOnce(function(){t.winFrameNode.opacity=255,"0"!=t.winAmount.string?(t.winParticleNode.active=!0,t.audioController._playWinAudio(),t.scheduleOnce(t.createShanPotCoinAnimation,3)):(t.winParticleNode.active=!1,t.audioController._playLoseAudio(),t.scheduleOnce(t.createShanPotCoinAnimation,3))},1)},diceCoverBackAndRollAgain:function(){var t=this;s.length<7?(s.push(t.rolledDice),cc.sys.localStorage.setItem("historyItemList",JSON.stringify(s)),t.setUpHistoryItemList(),s.length>3&&(t.historyLayout.y=100,t.historyScrollView.scrollToTop(1))):(t.addNewHistoryItem(t.rolledDice),t.setUpHistoryItemList(),t.historyLayout.y=100,t.historyScrollView.scrollToTop(1)),t.winFrameNode.active=!1,t.tokenLabel.string=t.userToken,t.creditLabel.string=t.creditAmount,t.checkClaimbuttonStatus(parseInt(t.creditAmount)),t.animationController._moveBackDiceCover(),t.scheduleOnce(function(){t.onRollStart()},1)},activeMatchCardAndCombo:function(t,e){t?this.cardLayout.children[e].getComponent("cardController").matchCardNode.active=!0:this.comboLayout.children[e].getComponent("comboController").matchComboNode.active=!0},InactiveLoseCardAndCombo:function(t,e){t?this.cardLayout.children[e].getComponent("cardController").node.getComponent(cc.Sprite).spriteFrame.active=!0:this.comboLayout.children[e].getComponent("comboController").matchComboNode.active=!0},changeStateTobetData:function(){l=[];for(var t=0;t<r.cardStates.length;t++)if(0!=r.cardStates[t].amount){var e=r.cardStates[t],o=e.name+"_"+e.amount;l.push(o)}for(var n=0;n<r.comboStates.length;n++)if(0!=r.comboStates[n].amount){var a=r.comboStates[n],i=a.name+"_"+a.amount;l.push(i)}},onTokenClick:function(t,e){switch(this.audioController._playbetTokenAudio(),e){case"1":this.cancelStatus=!1,a=this.tokenLayout.children[0].position,i=1,this.changeTokenBtnStatus(0);break;case"2":this.cancelStatus=!1,a=this.tokenLayout.children[1].position,i=10,this.changeTokenBtnStatus(1);break;case"3":this.cancelStatus=!1,a=this.tokenLayout.children[2].position,i=100,this.changeTokenBtnStatus(2);break;case"4":this.cancelStatus=!1,a=this.tokenLayout.children[3].position,i=1e3,this.changeTokenBtnStatus(3)}},addBetTokenAmount:function(){this.betAmount+=i},removeBetToken:function(t){this.betAmount-=t},onCardClick:function(t,e){var o=this;if(o.addBetTokenAmount(),o.betAmount>o.userToken){o.notEnoughTokenFrameNode.active=!0,o.invisibleMask.active=!0,o.betAmount-=i,o.betButton.getComponent(cc.Button).interactable=!1;var c=cc.fadeIn(.5),s=cc.fadeOut(1),l=cc.delayTime(1),u=cc.sequence(c,l,s);o.notEnoughTokenFrameNode.runAction(u),o.scheduleOnce(function(){o.notEnoughTokenFrameNode.active=!1,o.invisibleMask.active=!1,o.betButton.getComponent(cc.Button).interactable=!0},2)}else{t.x=t.x-140,t.y=t.y+160,n=cc.instantiate(o.betTokenPrefab),o.betTokenLayout.addChild(n),n.position=a;var d=t;o.cardLayout.children[e].getComponent("cardController").addTokenAmount(i);var m=cc.moveTo(.5,d),h=cc.fadeOut(1),C=cc.sequence(m,h);n.runAction(C),r.cardStates[e].state=1,o.renderCard(e),o.tokenLabel.string=parseInt(o.tokenLabel.string)-i}},onComboCardClick:function(t,e){var o=this;if(o.addBetTokenAmount(),o.betAmount>o.userToken){o.notEnoughTokenFrameNode.active=!0,o.invisibleMask.active=!0,o.betAmount-=i,o.betButton.getComponent(cc.Button).interactable=!1;var c=cc.fadeIn(.5),s=cc.fadeOut(1),l=cc.delayTime(1),u=cc.sequence(c,l,s);o.notEnoughTokenFrameNode.runAction(u),o.scheduleOnce(function(){o.notEnoughTokenFrameNode.active=!1,o.invisibleMask.active=!1,o.betButton.getComponent(cc.Button).interactable=!0},2)}else{t.x=t.x-125,t.y=t.y+55,n=cc.instantiate(o.betTokenPrefab),o.betTokenLayout.addChild(n),n.position=a;var d=t;o.comboLayout.children[e].getComponent("comboController").addTokenAmount(i);var m=cc.moveTo(.5,d),h=cc.fadeOut(1),C=cc.sequence(m,h);n.runAction(C),r.comboStates[e].state=1,o.renderCombo(e),o.tokenLabel.string=parseInt(o.tokenLabel.string)-i}},checkCardState:function(){this.cardStateCount=0;for(var t=0;t<r.cardStates.length;t++)this.cardStateCount+=r.cardStates[t].state;for(var e=0;e<r.comboStates.length;e++)this.cardStateCount+=r.comboStates[e].state},addAmountToState:function(t,e,o){t?r.comboStates[e].amount=o:r.cardStates[e].amount=o},addCardNode:function(){this.cardController=[];for(var t=0;t<6;t++){var e=cc.instantiate(this.cardPrefab),o=e.getComponent("cardController");this.cardController[t]=e.getComponent("cardController"),o.linkWithMainLayer(this),o.createCard(t,this.cardCharacterImage[t],r.cardStates[t]),this.renderCard(t),this.cardLayout.addChild(e)}},addComboCardNode:function(){this.comboController=[];for(var t=0;t<15;t++){var e=cc.instantiate(this.comboPrefab),o=e.getComponent("comboController");this.comboController[t]=e.getComponent("comboController"),o.linkWithMainLayer(this),o.createComboCard(t,this.comboCharacterImage[t],r.comboStates[t]),this.renderCombo(t),this.comboLayout.addChild(e)}},renderCard:function(t){0==r.cardStates[t].state?this.cardController[t].getComponent(cc.Sprite).spriteFrame=this.cardController[t].cardBgImages[0]:1==r.cardStates[t].state?this.cardController[t].getComponent(cc.Sprite).spriteFrame=this.cardController[t].cardBgImages[1]:2==r.cardStates[t].state&&(this.cardController[t].getComponent(cc.Sprite).spriteFrame=this.cardController[t].cardBgImages[2])},renderCombo:function(t){0==r.comboStates[t].state?this.comboController[t].getComponent(cc.Sprite).spriteFrame=this.comboController[t].comboBgImages[0]:1==r.comboStates[t].state?this.comboController[t].getComponent(cc.Sprite).spriteFrame=this.comboController[t].comboBgImages[1]:2==r.comboStates[t].state&&(this.comboController[t].getComponent(cc.Sprite).spriteFrame=this.comboController[t].comboBgImages[2])},onClickCancelButton:function(){this.audioController._playbetTokenAudio(),this.tokenLabel.string=this.userToken,this.resetGameState()},onRollStart:function(){this.cancelStatus=!1,this.betButton.active=!1,1!=this.autoBet?this.resetGameState():(this.resetCardState(),this.tokenLabel.string=this.userToken-this.betAmount),this.createDiceBowlAnim(),this.isFirstTime=!1},createDiceBowlAnim:function(){var t=this;t.mask.active=!0,t.animationController._createStartAnimation(),t.scheduleOnce(function(){t.invisibleMask.active=!1,t.betButton.active=!0},4)},changeTokenBtnStatus:function(t){for(var e=0;e<4;e++)e===t?(this.tokenLayout.children[e].getComponent(cc.Sprite).spriteFrame=this.tokenBtnActive,this.tokenLayout.children[e].children[1].scale=1):(this.tokenLayout.children[e].getComponent(cc.Sprite).spriteFrame=this.tokenBtnInActive,this.tokenLayout.children[e].children[1].scale=.6)},resetGameState:function(){for(var t=0;t<r.cardStates.length;t++)if(0!=r.cardStates[t].amount){var e=r.cardStates[t];e.state=0,e.amount=0,this.renderCard(t);var o=this.cardLayout.children[t].getComponent("cardController");o.matchCardNode.active=!1,o.removeTokenAmount(!1)}for(var n=0;n<r.comboStates.length;n++)if(0!=r.comboStates[n].amount){var a=r.comboStates[n];a.state=0,a.amount=0,this.renderCombo(n);var i=this.comboLayout.children[n].getComponent("comboController");i.matchComboNode.active=!1,i.removeTokenAmount(!1)}},resetCardState:function(){for(var t=0;t<r.cardStates.length;t++){if(0!=r.cardStates[t].amount)r.cardStates[t].state=1,this.renderCard(t),this.cardLayout.children[t].getComponent("cardController").matchCardNode.active=!1}for(var e=0;e<r.comboStates.length;e++){if(0!=r.comboStates[e].amount)r.comboStates[e].state=1,this.renderCombo(e),this.comboLayout.children[e].getComponent("comboController").matchComboNode.active=!1}},OnAutoBetToggleChange:function(){0==this.autoBetToggle.isChecked?(this.autoBet=0,cc.sys.localStorage.setItem("autoBet",this.autoBet)):(this.autoBet=1,cc.sys.localStorage.setItem("autoBet",this.autoBet))},checkAutoBetStatus:function(){this.autoBet=cc.sys.localStorage.getItem("autoBet"),1!=this.autoBet?this.autoBetToggle.isChecked=!1:this.autoBetToggle.isChecked=!0},setUpHistoryItemList:function(){this.historyLayout.removeAllChildren();for(var t=(s=JSON.parse(cc.sys.localStorage.getItem("historyItemList"))).length-1;t>=0;t--){var e=cc.instantiate(this.historyItemPrefab),o=e.getComponent("historyItemController");o.linkWithMainController(this),o.setUpHistoryItem(s[t]),this.historyLayout.addChild(e)}},addNewHistoryItem:function(t){(s=JSON.parse(cc.sys.localStorage.getItem("historyItemList"))).push(t),s.shift(),cc.sys.localStorage.setItem("historyItemList",JSON.stringify(s))},claimAndExit:function(){var t=this;t.audioController._playButtonAudio(),t.resetGameState(),c.claimReward(function(e,o){t.claimAmountLabel.string=o.data.creditAmount,t.claimAndExitFrameNode.active=!0,t.claimMask.active=!0,t.getUserStatus()})},onClickExit:function(){this.claimAndExitFrameNode.active=!1,this.claimMask.active=!1},createShanPotCoinAnimation:function(){if(this.shanPotCoinNode.removeAllChildren(),this.shanPotCoinNode.active=!0,"0"!=this.winAmount.string&&this.audioController._playCoinCollectAudio(),"0"!=this.winAmountValue)for(var t=0;t<5;t++){var e=cc.instantiate(this.coinItem);e.getComponent("shanCreditController").setupAmountAnimationCoin(t),this.shanPotCoinNode.addChild(e)}this.scheduleOnce(this.diceCoverBackAndRollAgain,2)},closeGuidePageView:function(){this.audioController._playButtonAudio(),this.isFirstTime&&this.onRollStart(),this.guidePageViewNode.active=!1,this.mask.active=!1,this.guidePageViewNode.getComponent(cc.PageView).content.x=-480}}),cc._RF.pop()},{"./dal":"dal"}],responsiveController:[function(t,e,o){"use strict";cc._RF.push(e,"aa136pCtK9Li7qtaJ8s2UGY","responsiveController"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.setResponsiveSize()},start:function(){},setResponsiveSize:function(){var t=this.node.getComponent(cc.Canvas),e=cc.sys.localStorage.getItem("responsive");if(cc.sys.os==cc.sys.OS_ANDROID)if(null!=e)0==e?(t.fitHeight=!0,t.fitWidth=!1):(t.fitHeight=!1,t.fitWidth=!0);else{var o=cc.view.getFrameSize().width/cc.view.getFrameSize().height;o>=1.78?(t.fitHeight=!0,t.fitWidth=!1,cc.sys.localStorage.setItem("responsive",0)):o<=1.78&&(t.fitHeight=!1,t.fitWidth=!0,cc.sys.localStorage.setItem("responsive",1))}else t.fitHeight=!0,t.fitWidth=!0}}),cc._RF.pop()},{}],shanCreditController:[function(t,e,o){"use strict";cc._RF.push(e,"9eb6dYosORD278mZJnd1MtB","shanCreditController"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},setupShanPotCoins:function(t){this.node.scaleX=1,this.node.x=0,this.node.x+=Math.floor(1099*Math.random())+-550,this.node.y=Math.floor(199*Math.random())+300;var e=cc.moveTo((t+2)/40,cc.v2(Math.floor(1049*Math.random())+-550,Math.floor(-51*Math.random())+-300)),o=cc.jumpTo(.5,cc.v2(this.node.x,Math.floor(49*Math.random())+-250),30,1),n=cc.moveTo(.5,cc.v2(this.node.x,Math.floor(49*Math.random())+-450));this.node.runAction(cc.sequence(e,o,n))},setupAmountAnimationCoin:function(t){var e=cc.moveTo((t+2)/10,cc.v2(-100,250)),o=cc.scaleTo(1.5,0,0);this.node.runAction(cc.sequence(e,o))},start:function(){}}),cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e,o){"use strict";cc._RF.push(e,"d9009XbxIVNVoN+sBG7CYoi","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","animationController","audioController","cardController","comboController","dal","historyItemController","mainController","responsiveController","shanCreditController"]);